<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bg.web.board.boardMapper">
    <select id="getBoardList" parameterType="com.bg.web.model.BoardVO" resultType="com.bg.web.model.BoardVO">
        <![CDATA[
            SELECT BID
                 , CATE_CD
                 , TITLE
                 , CONTENT
                 , TAG
                 , VIEW_CNT
                 , REG_ID
                 , REG_DT
                 , EDIT_DT
              FROM BOBORDMT
          ]]>
          <if test="cate_cd != null and cate_cd != ''">
              WHERE CATE_CD = #{cate_cd}
          </if>
    </select>

    <select id="getBoardContent" parameterType="com.bg.web.model.BoardVO" resultType="com.bg.web.model.BoardVO">
        <![CDATA[
            SELECT BID
                 , CATE_CD
                 , TITLE
                 , CONTENT
                 , TAG
                 , VIEW_CNT
                 , REG_ID
                 , REG_DT
                 , EDIT_DT
              FROM BOBORDMT
             WHERE BID = #{bid}
          ]]>
    </select>

    <insert id="insertBoard" parameterType="com.bg.web.model.BoardVO">
        <![CDATA[
            INSERT 
              INTO BOBORDMT 
            (CATE_CD
            , TITLE
            , CONTENT
            , TAG
            , VIEW_CNT
            , REG_ID
            , REG_DT
            , EDIT_DT)
            VALUES 
            (#{cate_cd}
            , #{title}
            , #{content}
            , #{tag}
            , 0
            , #{reg_id}
            , now()
            , now())
        ]]>
    </insert>

    <update id="updateBoard" parameterType="com.bg.web.model.BoardVO">
        <![CDATA[
            UPDATE BOBORDMT 
               SET TITLE = #{title}
                 , CONTENT = #{content}
                 , TAG = #{tag}
                 , EDIT_DT = now()
             WHERE BID = ${bid}
         ]]>
    </update>

    <delete id="deleteBoard" parameterType="int">
        <![CDATA[
            DELETE 
              FROM BOBORDMT
             WHERE BID = #{bid}
         ]]>
    </delete>

    <update id="updateViewCnt" parameterType="com.bg.web.model.BoardVO">
        <![CDATA[
            UPDATE BOBORDMT
               SET VIEW_CNT = VIEW_CNT + 1
             WHERE BID = #{bid}
         ]]>
    </update>
</mapper>